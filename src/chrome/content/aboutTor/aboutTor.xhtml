<?xml version="1.0" encoding="UTF-8"?>
<!--
   - Copyright (c) 2014, The Tor Project, Inc.
   - See LICENSE for licensing information.
   - vim: set sw=2 sts=2 ts=8 et syntax=xml:
  -->

<!DOCTYPE html [
  <!ENTITY % htmlDTD
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "DTD/xhtml1-strict.dtd">
  %htmlDTD;
  <!ENTITY % globalDTD SYSTEM "chrome://global/locale/global.dtd">
  %globalDTD;
  <!ENTITY % aboutTorDTD SYSTEM "chrome://torbutton/locale/aboutTor.dtd">
  %aboutTorDTD;
]>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>&aboutTor.title;</title>
  <link rel="stylesheet" type="text/css" media="all"
        href="chrome://torbutton/skin/aboutTor.css"/>
<script type="text/javascript">
 <![CDATA[
function onLoad()
{
  insertPropertyStrings();

  window.addEventListener("resize", function() {
    resizeToolbarIconArrow();
  }, false);

  window.setTimeout( function() {
    resizeToolbarIconArrow();
    document.getElementById('sx').focus();
  }, 0);
}

function resizeToolbarIconArrow()
{
  var textElem = document.getElementById("updatePrompt");
  var rightDiv = document.getElementById("toolbarIconArrowRight");
  if (textElem && rightDiv)
  {
    var width = textElem.offsetLeft - rightDiv.offsetLeft - 6;
    rightDiv.style.width = width + "px";
  }
}

function insertPropertyStrings()
{
  try {
    var kPropertiesURL = "chrome://torbutton/locale/aboutTor.properties";

    Components.utils.import("resource://gre/modules/Services.jsm");
    var gStringBundle = Services.strings.createBundle(kPropertiesURL);
    var s1 = gStringBundle.GetStringFromName("aboutTor.searchSP.privacy.link");
    var s2 = gStringBundle.GetStringFromName("aboutTor.searchSP.search.link");
    var result = gStringBundle.formatStringFromName("aboutTor.searchSP.privacy",
                  [s1, s2], 2);
    if (result) {
      var elem = document.getElementById("searchProviderInfo");
      if (elem)
        elem.innerHTML = result;
    }
  } catch(e) {};
}

]]>
</script>
</head>
<body dir="&locale.dir;" onload="onLoad();">
<div id="torstatus" class="top">
  <div id="torstatus-version"/>
  <div id="torstatus-image"/>
  <div class="hideIfTorOff">
    <h1>&aboutTor.success.label;</h1>
    <h2 id="success2">&aboutTor.success2.label;</h2>
    <h3 class="hideIfTBBNeedsUpdate">&aboutTor.success3.label;</h3>
    <a id="testTorSettings" href="about:blank">&aboutTor.check.label;</a>
  </div>
  <div class="hideIfTorOn">
    <h1>&aboutTor.failure.label;</h1>
    <h2>&aboutTor.failure2.label;</h2>
    <h3>&aboutTor.failure3prefix.label;<a href="mailto:&aboutTor.failure3Link;"
>&aboutTor.failure3Link;</a>&aboutTor.failure3suffix.label;</h3>
  </div>
</div>
<div class="top">
  <div class="hideIfTorIsUpToDate">
    <h1 class="hideIfTorOff">&aboutTor.outOfDateTorOn.label;</h1>
    <h1 class="hideIfTorOn">&aboutTor.outOfDateTorOff.label;</h1>
    <h3 id="updatePrompt">&aboutTor.outOfDate2.label;</h3>
    <div id="toolbarIconArrowLeft"/>
    <div id="toolbarIconArrowRight"/>
  </div>
</div>

<div class="searchbox hideIfTorOff"> <!-- begin form based search -->
  <form action="&aboutTor.searchSPPost.link;" method="post">
  <div id="sxw">
    <div id="sbutton">
      <input name="b" id="sb" value="" title="&aboutTor.search.label;"
             alt="&aboutTor.search.label;" type="submit"/>
    </div>
    <input name="q" autocomplete="off" id="sx" type="text"/>
  </div>
  <h4 id="searchProviderInfo" />
  </form>
</div>

<div class="hideIfTorOn" style="height:100px"/>

<div id="middle" class="hideIfTorOff">
  <div class="container two">
    <h1>&aboutTor.whatnextQuestion.label;</h1>
    <p>&aboutTor.whatnextAnswer.label;</p>
    <a class="tips" href="&aboutTor.whatnext.link;">&aboutTor.whatnext.label;</a>
  </div>

  <div class="container three">
    <h1>&aboutTor.helpInfo1.label;</h1>
    <p>&aboutTor.helpInfo2.label;</p>
    <ul>
      <li><a href="&aboutTor.helpInfo3.link;">&aboutTor.helpInfo3.label;</a></li>
      <li><a href="&aboutTor.helpInfo4.link;">&aboutTor.helpInfo4.label;</a></li>
      <li><a href="&aboutTor.helpInfo5.link;">&aboutTor.helpInfo5.label;</a></li>
    </ul>
  </div>
</div> <!-- middle -->

<div id="bottom">
  <p>&aboutTor.footer.label;
<a href="&aboutTor.learnMore.link;">&aboutTor.learnMore.label;</a></p>
</div>

</body>
</html>
